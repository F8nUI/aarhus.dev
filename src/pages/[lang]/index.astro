---
import Events from '@components/Events.astro'
import Layout from '@layouts/Layout.astro'
import { getEvents, getLanguageName } from '@lib/event'

export async function getStaticPaths() {
  const events = await getEvents()
  let languages = events.flatMap((e) => e.id.split('/')[0]).filter((lang) => lang)
  languages = [...new Set(languages)]

  return languages.map((lang) => ({
    params: { lang },
    props: { language: lang },
  }))
}

const { language } = Astro.props
const languageName = getLanguageName(language)
const metadata = {
  title: `${languageName} Events in Aarhus`,
  description: `${languageName} tech events and meetups in Aarhus, Denmark`
}
---

<Layout {language} {metadata}>
  <Events {language} />
</Layout>
